{% extends "base.html" %}

{% block title %}Order #{{ order.order_id }} - Modern Shop{% endblock %}

{% block content %}
<div class="container" style="margin-top: 100px; margin-bottom: 50px; max-width: 800px;">
    <a href="{% if session.get('is_admin') %}/admin/orders{% else %}/orders{% endif %}" 
       class="btn btn-outline" style="margin-bottom: 30px;">
        <i class="fas fa-arrow-left"></i> Back to Orders
    </a>
    
    <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <!-- Order Header -->
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 30px;">
            <div>
                <h1 style="margin-bottom: 10px; color: #1f2937;">Order #{{ order.order_id }}</h1>
                <div style="color: #6b7280;">
                    <i class="fas fa-calendar" style="margin-right: 5px;"></i>
                    {{ order.created_at.strftime('%B %d, %Y at %I:%M %p') }}
                </div>
            </div>
            
            <div>
                <span style="background: 
                    {% if order.status == 'Paid' %}#10b981
                    {% elif order.status == 'Pending' %}#f59e0b
                    {% elif order.status == 'Shipped' %}#3b82f6
                    {% elif order.status == 'Delivered' %}#8b5cf6
                    {% else %}#6b7280{% endif %};
                    color: white; padding: 10px 25px; border-radius: 20px; font-size: 16px; font-weight: 600;">
                    {{ order.status }}
                </span>
            </div>
        </div>
        
        <!-- Order Items -->
        <div style="margin-bottom: 30px;">
            <h2 style="margin-bottom: 20px; color: #1f2937; font-size: 20px;">Order Items</h2>
            
            {% if items %}
                {% for item in items %}
                <div style="display: flex; align-items: center; padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px;">
                    <img src="{{ item.image }}" alt="{{ item.name }}" 
                         style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; margin-right: 20px;">
                    
                    <div style="flex: 1;">
                        <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">{{ item.name }}</div>
                        <div style="color: #6b7280;">Quantity: {{ item.quantity }}</div>
                    </div>
                    
                    <div style="font-weight: bold; color: #3b82f6; font-size: 18px;">
                        ₹{{ item.total }}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: 30px; color: #6b7280;">
                    <i class="fas fa-exclamation-circle" style="font-size: 48px; margin-bottom: 15px;"></i>
                    <p>Order details not available</p>
                </div>
            {% endif %}
        </div>
        
        <!-- Order Summary -->
        <div style="border-top: 2px solid #e5e7eb; padding-top: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #4b5563;">Subtotal</span>
                <span style="font-weight: 600;">₹{{ order.total }}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #4b5563;">Shipping</span>
                <span style="color: #10b981; font-weight: 600;">FREE</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #4b5563;">Tax (18%)</span>
                <span style="font-weight: 600;">₹{{ (order.total * 0.18)|round(2) }}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; padding-top: 15px; border-top: 1px solid #e5e7eb; font-size: 20px; font-weight: bold;">
                <span style="color: #1f2937;">Total Amount</span>
                <span style="color: #3b82f6;">₹{{ (order.total * 1.18)|round(2) }}</span>
            </div>
        </div>
        
        <!-- Payment Information -->
        {% if order.payment_id %}
        <div style="margin-top: 30px; padding: 20px; background: #f0f9ff; border-radius: 8px;">
            <h3 style="margin-bottom: 15px; color: #1f2937; font-size: 18px;">Payment Information</h3>
            <div style="color: #4b5563;">
                <div style="margin-bottom: 5px;">
                    <i class="fas fa-receipt" style="margin-right: 10px;"></i>
                    <strong>Payment ID:</strong> {{ order.payment_id }}
                </div>
                <div>
                    <i class="fas fa-calendar-check" style="margin-right: 10px;"></i>
                    <strong>Payment Date:</strong> {{ order.created_at.strftime('%B %d, %Y') }}
                </div>
            </div>
        </div>
        {% endif %}
        
        <!-- Customer Information -->
        <div style="margin-top: 30px; padding: 20px; background: #f9fafb; border-radius: 8px;">
            <h3 style="margin-bottom: 15px; color: #1f2937; font-size: 18px;">Customer Information</h3>
            <div style="color: #4b5563;">
                <div style="margin-bottom: 5px;">
                    <i class="fas fa-envelope" style="margin-right: 10px;"></i>
                    <strong>Email:</strong> {{ order.user_email }}
                </div>
                <div>
                    <i class="fas fa-user" style="margin-right: 10px;"></i>
                    <strong>User ID:</strong> {{ order.user_id }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}