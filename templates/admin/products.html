{% extends "base.html" %}

{% block title %}Manage Products - Modern Shop{% endblock %}

{% block content %}
<div class="container" style="margin-top: 100px; margin-bottom: 50px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h1 style="color: #1f2937;">Manage Products</h1>
        <a href="/admin/add-product" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add New Product
        </a>
    </div>
    
    {% if products %}
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <thead>
                <tr style="background: #f9fafb;">
                    <th style="padding: 15px; text-align: left; font-weight: 600; color: #4b5563;">Image</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; color: #4b5563;">Name</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; color: #4b5563;">Category</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; color: #4b5563;">Price</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; color: #4b5563;">Stock</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; color: #4b5563;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr style="border-bottom: 1px solid #e5e7eb;">
                    <td style="padding: 15px;">
                        <img src="{{ product.image }}" alt="{{ product.name }}" 
                             style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
                    </td>
                    <td style="padding: 15px;">
                        <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">{{ product.name }}</div>
                        <div style="font-size: 14px; color: #6b7280; max-width: 300px;">
                            {{ product.description[:100] }}{% if product.description|length > 100 %}...{% endif %}
                        </div>
                    </td>
                    <td style="padding: 15px;">
                        <span style="background: #e5e7eb; padding: 5px 15px; border-radius: 20px; font-size: 14px;">
                            {{ product.category }}
                        </span>
                    </td>
                    <td style="padding: 15px;">
                        <div style="font-weight: bold; color: #3b82f6;">₹{{ product.discount_price if product.discount_price else product.price }}</div>
                        {% if product.discount_price %}
                        <div style="font-size: 14px; color: #6b7280; text-decoration: line-through;">
                            ₹{{ product.price }}
                        </div>
                        {% endif %}
                    </td>
                    <td style="padding: 15px;">
                        <span style="font-weight: 600; color: {% if product.stock > 10 %}#10b981{% elif product.stock > 0 %}#f59e0b{% else %}#ef4444{% endif %};">
                            {{ product.stock }}
                        </span>
                    </td>
                    <td style="padding: 15px;">
                        <div style="display: flex; gap: 10px;">
                            <a href="/product/{{ product.id }}" class="btn btn-sm btn-outline" target="_blank">
                                <i class="fas fa-eye"></i>
                            </a>
                            <button class="btn btn-sm btn-danger" onclick="deleteProduct({{ product.id }})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="text-align: center; padding: 60px 20px; background: white; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <i class="fas fa-box" style="font-size: 80px; color: #d1d5db; margin-bottom: 20px;"></i>
        <h2 style="margin-bottom: 15px; color: #4b5563;">No products found</h2>
        <p style="color: #6b7280; margin-bottom: 30px;">Add your first product to get started!</p>
        <a href="/admin/add-product" class="btn btn-primary" style="padding: 15px 30px; font-size: 16px;">
            <i class="fas fa-plus"></i> Add New Product
        </a>
    </div>
    {% endif %}
</div>

<script>
function deleteProduct(productId) {
    if (confirm('Are you sure you want to delete this product?')) {
        alert('Product deletion functionality would be implemented here.');
        // In a real app: fetch('/admin/delete-product/' + productId, { method: 'DELETE' })
    }
}
</script>
{% endblock %}